document.addEventListener("DOMContentLoaded", () => {
  const programData = {
    "mali-kreatori": {
      title: "–ö–õ–£–ë: –ú–ê–õ–ò –ö–†–ï–ê–¢–û–†–ò (6‚Äì9 –≥–æ–¥–∏–Ω–∏)",
      description: `–ó–∞–±–∞–≤–Ω–æ –ø–∞—Ç—É–≤–∞—ö–µ –Ω–∏–∑ –ø—Ä–∏–∫–∞–∑–Ω–∏, –∏–≥—Ä–∏ –∏ –ø—Ä–æ–µ–∫—Ç–∏ –∫–∞–¥–µ –¥–µ—Ü–∞—Ç–∞ –≥–∏ —É—á–∞—Ç –æ—Å–Ω–æ–≤–∏—Ç–µ –Ω–∞ –ø—Ä–µ—Ç–ø—Ä–∏–µ–º–Ω–∏—à—Ç–≤–æ—Ç–æ, —Ç–∏–º—Å–∫–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Ç–æ —Ä–∞–∑–º–∏—Å–ª—É–≤–∞—ö–µ. –ü—Ä–µ–∫—É —Ñ–∞–Ω—Ç–∞–∑–∏—ò–∞ –∏ –ø—Ä–∞–∫—Å–∞, –≥–∏ —Ä–∞–∑–≤–∏–≤–∞–∞—Ç —Å–∞–º–æ–¥–æ–≤–µ—Ä–±–∞—Ç–∞ –∏ –∂–∏–≤–æ—Ç–Ω–∏—Ç–µ –≤–µ—à—Ç–∏–Ω–∏ –¥–æ–¥–µ–∫–∞ —Å–æ–∑–¥–∞–≤–∞–∞—Ç –Ω–µ—à—Ç–æ —Å–≤–æ–µ.`,
      schedule: `–¢—Ä–∞–µ—ö–µ: 4 –Ω–µ–¥–µ–ª–∏.<br>–°–µ—Å–∏–∏: –Ω–µ–¥–µ–ª–∞, 11:00‚Äì12:30 —á.`,
      format: `–§–∏–∑–∏—á–∫–∏ –∏ –¥–∞–ª–µ—á–∏–Ω—Å–∫–∏.`,
      teacher: `–à–∞–Ω–∞ –è–µ–∫–æ–≤`,
      teacherBio: "/html/instructors.html#—ò–∞–Ω–∞-—ü–µ–∫–æ–≤",
      price: `3000 –ú–ö–î`,
      image: "../assets/images/Edu Cards/mali-kreatori.png",
    },
    "idni-osnovaci": {
      title: "–ö–õ–£–ë: –ò–î–ù–ò –û–°–ù–û–í–ê–ß–ò (10‚Äì14 –≥–æ–¥–∏–Ω–∏)",
      description: `–ü–∞—Ç—É–≤–∞—ö–µ –≤–æ —Å–≤–µ—Ç–æ—Ç –Ω–∞ –±–∏–∑–Ω–∏—Å–æ—Ç, –∏–Ω–æ–≤–∞—Ü–∏–∏—Ç–µ –∏ –ª–∏–¥–µ—Ä—Å—Ç–≤–æ—Ç–æ! –ü—Ä–µ–∫—É –ø—Ä–∞–∫—Ç–∏—á–Ω–∏ –ø—Ä–æ–µ–∫—Ç–∏ –∏ —Ç–∏–º—Å–∫–∏ –ø—Ä–µ–¥–∏–∑–≤–∏—Ü–∏, –¥–µ—Ü–∞—Ç–∞ —É—á–∞—Ç –∫–∞–∫–æ –¥–∞ —Ä–∞–∑–≤–∏–≤–∞–∞—Ç –∏–¥–µ–∏, –∫—Ä–µ–∏—Ä–∞–∞—Ç –±–∏–∑–Ω–∏—Å –ø–ª–∞–Ω–æ–≤–∏ –∏ –¥–∞ –∫–æ–º—É–Ω–∏—Ü–∏—Ä–∞–∞—Ç —Å–∞–º–æ—É–≤–µ—Ä–µ–Ω–æ. –ò–¥–µ–∞–ª–Ω–æ –∑–∞ –≥—Ä–∞–¥–µ—ö–µ –ª–∏–¥–µ—Ä—Å–∫–∏ –∏ –ø—Ä–µ—Ç–ø—Ä–∏–µ–º–∞—á–∫–∏ –≤–µ—à—Ç–∏–Ω–∏.`,
      schedule: `–¢—Ä–∞–µ—ö–µ: 4 –Ω–µ–¥–µ–ª–∏.<br>–°–µ—Å–∏–∏: —Å–∞–±–æ—Ç–∞, 11:00‚Äì13:00 —á.`,
      format: `–§–∏–∑–∏—á–∫–∏ –∏ –¥–∞–ª–µ—á–∏–Ω—Å–∫–∏.`,
      teacher: `–ï–ª–µ–Ω–∞ –•–∞—ü–∏ –ü–µ—Ü–æ–≤–∞`,
      teacherBio: "/html/instructors.html#–µ–ª–µ–Ω–∞-—Ö–∞—ü–∏-–ø–µ—Ü–æ–≤–∞",
      price: `3500 –ú–ö–î`,
      image: "../assets/images/Edu Cards/idni-osnovaci.png",
    },
    "mini-startapdzii": {
      title: "–ö–õ–£–ë: –ú–ò–ù–ò –°–¢–ê–†–¢–ê–ü–è–ò–ò (15‚Äì18 –≥–æ–¥–∏–Ω–∏)",
      description: `–ú–µ—Å—Ç–æ –∫–∞–¥–µ –º–ª–∞–¥–∏—Ç–µ —É—á–∞—Ç –∫–∞–∫–æ –¥–∞ –≥—Ä–∞–¥–∞—Ç –∏–¥–µ–∏, –∫—Ä–µ–∏—Ä–∞–∞—Ç –±–∏–∑–Ω–∏—Å-–ø–ª–∞–Ω–æ–≤–∏ –∏ —Å—Ç–∞–Ω—É–≤–∞–∞—Ç –ª–∏–¥–µ—Ä–∏. –°–æ–≤—Ä—à–µ–Ω –ø—Ä–µ–¥–∏–∑–≤–∏–∫ –∑–∞ —Ç–∏–Ω–µ—ò—ü–µ—Ä–∏ –∫–æ–∏ —Å–∞–∫–∞–∞—Ç –¥–∞ —Ä–∞–∑–º–∏—Å–ª—É–≤–∞–∞—Ç –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ –∏ –¥–µ–ª—É–≤–∞–∞—Ç –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ.`,
      schedule: `–¢—Ä–∞–µ—ö–µ: 4 –Ω–µ–¥–µ–ª–∏.<br>–°–µ—Å–∏–∏: —Å–∞–±–æ—Ç–∞, 13:30‚Äì15:30 —á.`,
      format: `–§–∏–∑–∏—á–∫–∏ –∏ –¥–∞–ª–µ—á–∏–Ω—Å–∫–∏.`,
      teacher: `–í–∏–∫—Ç–æ—Ä –ú–∏—Ç–µ–≤—Å–∫–∏`,
      teacherBio: "/html/instructors.html#–≤–∏–∫—Ç–æ—Ä-–º–∏—Ç–µ–≤—Å–∫–∏",
      price: `4000 –ú–ö–î`,
      image: "../assets/images/Edu Cards/mini-startapdzii.png",
    }
  };

  const urlParams = new URLSearchParams(window.location.search);
  const selectedProgram = urlParams.get("program");
  const details = programData[selectedProgram];
  const container = document.getElementById("program-details");

  if (details && container) {
    container.innerHTML = `

      <h1>${details.title}</h1>
      <div class="edu-image-wrapper">
        <img src="${details.image}" alt="${details.title}" loading="lazy">
      </div>
      <p>${details.description}</p>
      <h3>üóì –†–∞—Å–ø–æ—Ä–µ–¥</h3>
      <p>${details.schedule}</p>
      <h3>üìç –§–æ—Ä–º–∞—Ç –Ω–∞ –ø—Ä–µ–¥–∞–≤–∞—ö–∞</h3>
      <p>${details.format}</p>
      <h3>üë©‚Äçüè´ –ü—Ä–µ–¥–∞–≤–∞—á</h3>
      <p>${details.teacher}</p>
      <a href="${details.teacherBio}" class="btn-main btn-main-secondary" style="margin-bottom:1rem;">–ü–æ–≤–µ—ú–µ –∑–∞ –ø—Ä–µ–¥–∞–≤–∞—á–æ—Ç</a>
      <h3>üí∞ –¶–µ–Ω–∞</h3>
      <p>${details.price}</p>
      <a href="/html/contact.html" class="btn-main btn-main-secondary">–ó–∞–ø–∏—à–∏ —Å–µ ‚Üí</a>
    `;
  } else if (container) {
    container.innerHTML = `<p>–ü—Ä–æ–≥—Ä–∞–º–∞—Ç–∞ –Ω–µ –µ –ø—Ä–æ–Ω–∞—ò–¥–µ–Ω–∞.</p>`;
  }

  // Sorting and Filtering Functionality
  const sortSelect = document.getElementById('sort-select');
  const filterAge = document.getElementById('filter-age');
  const coursesContainer = document.querySelector('.courses-container');
  const cards = Array.from(document.querySelectorAll('.course-card'));

  function sortCards(sortValue) {
    const sortedCards = [...cards].sort((a, b) => {
      const ageA = a.dataset.age.split('-')[0];
      const ageB = b.dataset.age.split('-')[0];
      
      if (sortValue === 'age-asc') {
        return parseInt(ageA) - parseInt(ageB);
      } else if (sortValue === 'age-desc') {
        return parseInt(ageB) - parseInt(ageA);
      }
      return 0;
    });

    // Clear container and append sorted cards
    coursesContainer.innerHTML = '';
    sortedCards.forEach(card => {
      if (filterAge.value === 'all' || card.dataset.age === filterAge.value) {
        coursesContainer.appendChild(card);
      }
    });
  }

  function filterCards() {
    const selectedAge = filterAge.value;
    cards.forEach(card => {
      if (selectedAge === 'all' || card.dataset.age === selectedAge) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  }

  // Event listeners
  sortSelect.addEventListener('change', () => {
    sortCards(sortSelect.value);
  });

  filterAge.addEventListener('change', () => {
    filterCards();
    if (sortSelect.value !== 'default') {
      sortCards(sortSelect.value);
    }
  });
});
